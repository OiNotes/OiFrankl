# Финальная настройка лайков

## Что было сделано

1. ✅ Добавлена переменная `VITE_USE_LOCAL_STORAGE=false` в `vercel.json` - теперь на продакшене будет использоваться Supabase

2. ✅ Синхронизированы лайки между компонентами:
   - ParagraphView теперь использует `toggleLike` из родительского прогресса
   - Лайки корректно сохраняются в `progress.likes`
   - Избранное теперь будет показывать правильные абзацы

3. ✅ Создан SQL скрипт для исправления структуры БД

## Что нужно сделать вам

### 1. Выполните SQL скрипт в Supabase

1. Откройте https://app.supabase.com/project/nfayxrcrzsdxlwpumnwb
2. Перейдите в SQL Editor
3. Скопируйте содержимое файла `fix-global-likes.sql`
4. Вставьте и нажмите Run

### 2. Проверьте на продакшене

После деплоя Vercel (обычно занимает 1-2 минуты):

1. Откройте сайт на продакшене
2. Поставьте несколько лайков
3. Проверьте, что они появляются в избранном
4. Перезагрузите страницу - лайки должны сохраниться
5. Откройте с другого устройства - должны быть видны чужие лайки

## Если что-то не работает

1. Проверьте в Vercel → Functions → Logs на наличие ошибок
2. Проверьте в Supabase → Logs → API logs
3. Убедитесь, что все таблицы созданы корректно

## Изменения отправлены на GitHub

Все изменения уже в репозитории. Vercel автоматически задеплоит их.